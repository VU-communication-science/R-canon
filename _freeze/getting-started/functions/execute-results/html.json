{
  "hash": "f6eaf75bb3eab71d4aa012caf03428f0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Functions\norder: 4\n---\n\n\n\n\n\n\n# What is a function? {#what-is-a-function}\n99% of what you do in R will involve using functions. \nA function in R is like a mini-program that you can use to perform specific tasks. \nIt takes *input*, processes it, and gives you an *output*. \nFor example, there are functions for:\n\n* importing data \n* computing descriptive statistics\n* performing statistical tests\n* visualizing data\n\nA function in R has the form: \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutput <- function_name(argument1, argument2, ...)`\n```\n:::\n\n\n\n\n\n\n* **function_name** is a name to indicate which function you want to use. It is followed by parentheses.\n* **arguments** are the input of the function, and are inserted within the parentheses. \n* **output** is anything that is returned by the function. \n\nFor example, the function `c` *c*ombines multiple values into a *vector*.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx = c(1,2,3,4)\n```\n:::\n\n\n\n\n\n\nNow, we can use the `mean` function to calculate the mean of these numbers:\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm <- mean(x)\n```\n:::\n\n\n\n\n\n\nThe calculated mean, `2.5`, is now assigned to the name `m`:\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2.5\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Optional arguments {#optional-arguments}\n\nIn the `c` and `mean` functions above, all the arguments were **required**. \nTo **c**ombine numbers into a vector, we *needed* to provide a list of numbers.\nTo calculate a **mean**, we *needed* to provide a numeric vector.\n\nIn addition to the **required** arguments, a function can also have **optional** arguments, that give you more control over what a function does.\nFor example, suppose we have a range of numbers that also contains a missing value. In R a missing value is called `NA`, which stands for `Not Available`:\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx_with_missing <- c(1, 2, 3, NA, 4)\n```\n:::\n\n\n\n\n\n\nNow, if we call the `mean` function, R will say that the mean is unknown, since the third value is unknown:\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(x_with_missing)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] NA\n```\n\n\n:::\n:::\n\n\n\n\n\n\nThis is statistically a very correct answer.\nBut often, if some values happen to be missing in your data, you want to be able to calculate the mean just for the numbers that are not missing.\nFortunately, the mean function has an **optional argument** `na.rm` (remove NAs) that you can set to `TRUE` (or to `T`, which is short for `TRUE`) to ignore the NAs:\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(x, na.rm=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2.5\n```\n\n\n:::\n:::\n\n\n\n\n\n\nNotice that for the **required** argument, we directly provide the input `x`, but for the **optional** argument we include the argument name `na.rm = TRUE`.\nThe reason is simply that there are other optional arguments, so we need to specify which one we're using.\n\n::: {.callout-note title=\"How do I know what arguments a function has?\" collapse=\"true\"}\n\nTo learn more about what a function does and what arguments it has, you can look it up in the 'Help' pane in the bottom right, \nor run `?function_name` in R. \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n?mean\n```\n:::\n\n\n\n\n\n\nHere you can learn about the `na.rm` argument that we just used!\n\nIf you are just getting to know R, we recommend first finishing the rest of the `Getting Started` section. \nThen once you get the hang of things, have a look at the [Use ?function help page](../good-to-know/0_how-to-use-a-function.qmd) tutorial.\n:::\n\n\n## Using the pipe syntax {#pipe-syntax}\n\nThere is another common way to use functions in R using the **pipe** syntax.\nWith the pipe syntax, you can *pipe* the first argument into the function, instead of putting it inside the parentheses.\nAs you will see below, this allows you to create a pipeline of functions, which is often easier to read.\nThe pipe syntax uses the `|>` operator, which is used as follows:\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nargument1 |> function_name(argument2, ...)\n```\n:::\n\n\n\n\n\n\nFor example, the following two lines of code give identical output:\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(x_with_missing, na.rm=T)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2.5\n```\n\n\n:::\n\n```{.r .cell-code}\nx_with_missing |> mean(na.rm=T)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2.5\n```\n\n\n:::\n:::\n\n\n\n\n\n\nNotice how our first argument, the **required** argument `x_with_missing`, is *piped* into the mean function.\nInside the mean function, we only specify the second argument, the **optional** argument `na.rm`.\n\nSo why do we need this alternative way of doing the same thing?\nThe reason is that when writing code, you shouldn't just think about **what the code does**, but also about **how easy the code is to read**.\nThis not only helps you prevent mistakes, but also makes your analysis **transparent**.\nAs you'll see later, you'll encounter many cases where your analysis requires you to string together multiple functions.\nIn these cases, pipes make your code much easier to read.\n\nFor example, imagine we would want to round the result (`2.5`) up to a round number (`3`). \nWith the pipe syntax we can just add the round function to our pipeline.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx_with_missing |> \n  mean(na.rm=T) |> \n  round()\n```\n:::\n\n\n\n\n\n\nYou'll see how powerful this can be later on, especially in the [Data Management](../data-management/index.qmd) chapter.\nIn order to prepare and clean up your data, you'll often need to perform a series of functions in a specific order.\nThe pipe syntax allows you to do this in a very readable way.\n\n# Mastering functions\n\nThere are some usefull tricks for using functions in R that are good to know about.\nWe do not discuss these here, because if you're just starting out, there are more important things to learn first.\nBut once you get the hang of things, you can learn more about these tricks in the [Good to Know](../good-to-know/function-documentation.qmd) tutorial.",
    "supporting": [
      "functions_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}