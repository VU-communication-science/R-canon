{
  "hash": "aa738713a7f4d8a4b5446a800ab184cd",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Simple linear regression\nsubtitle: \"Predicting one variable from another\"\n---\n\n\n\n\n# What is simple linear regression?\n\nIn the tutorial on [correlation](../tests/correlation.qmd) we learned how to test if there is a relationship between two numeric variables.\nWe saw that the correlation does not have a direction, and that it only tells us if there is a relationship between the variables, and how strong it is.\nWith simple linear regression we can take this one step further, and try to *predict* the value of one variable based on the value of another variable.\n\nThe term *predict* is used here in a statistical sense, which is slighly different from the everyday use of the word.\nWhat we want to know is simply how well we can guess the value of one variable if we know the value of another variable.\nFor example, imagine that you want to be able to predict for a random person on the street how much trust they have in journalists.\nWhat information would you use to make this prediction?\nOne thing you might consider is the age of the person.\nYou perform a correlation test, and find that there is indeed a positive correlation between age and news consumption.\nSo you could use this information to make a prediction: the older the person, the more news they consume.\n\nBut how will you use this information to make the best possible prediction, and how good will your prediction be?\nThis is something that regression analysis can help you with!\nWe refer to the variable that we want to predict as the **dependent variable** (e.g. news consumption), and the variables that we use to make the prediction as the **independent variables** (e.g. age).\nIn simple linear regression we only have one independent variable.\nLater you will learn how to use more than one independent variable, using [multiple regression](../tests/multiple-regression.qmd).\n\n# How to use it\n\nFor this tutorial we'll be using our standard practice data.\nRegression is a flexible tool, allowing the indepent variable to either be numeric (like in a correlation), binary (like in a t-test), or categorical (like in an ANOVA).\nSo we'll prepare a bunch of columns to show your an example for each of these cases.\n\nRegression analysis is built into R, but we'll also be using the `tidyverse` package to load and clean the data, and the `sjPlot` package to show the results in a nice table.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sjPlot)\n\nd <- read_csv(\"https://tinyurl.com/R-practice-data\") |>\n        mutate(age = if_else(age > 100, 2024 - age, age)) |>\n        select(age, experiment_group, np_subscription, trust_t1, trust_t2)\n\nd\n```\n:::\n\n\n\n\n\n## Regression with numerical independent variable\n\nLet's start with the example of predicting `trust` in journalists based on `age`.\nFor this we'll be using the `trust_t1`[^1] variable as the dependent variable, and the `age` variable as the independent variable.\nWe'll use the `lm()` function to run the regression, and the `tab_model()` function from the `sjPlot` package to show the results in a nice table.\nInside the `lm()` function we specify the formula for the regression, which has the format `dependent ~ independent` (just like in the t-test and ANOVA).\n\n[^1]: We use the `trust_t1` variable here, because for the current analysis we are not interested in the effect of the experimental group. Since `trust_t1` is measured before the experiment, it is not influenced by the experiment.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm <- lm(trust_t1 ~ age, data = d) \n\ntab_model(m)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<tr>\n<th style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; \">&nbsp;</th>\n<th colspan=\"3\" style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; \">trust_t1</th>\n</tr>\n<tr>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; \">Predictors</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">Estimates</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">CI</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">p</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(Intercept)</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.21</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.99&nbsp;&ndash;&nbsp;2.43</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">age</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.04</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.04&nbsp;&ndash;&nbsp;0.05</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;\">Observations</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;\" colspan=\"3\">595</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;\">R<sup>2</sup> / R<sup>2</sup> adjusted</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;\" colspan=\"3\">0.292 / 0.291</td>\n</tr>\n\n</table>\n\n`````\n:::\n:::\n\n\n\n\nThe output of the regression analysis gives us values for two **predictors**: the **(intercept)** and the **age** variable.\nThis is the information that we need to make a prediction.  \nTo help you understand what this means, it helps to visualize the *regression line*.\nFor this we can use the `plot_model()` function.[^2]\n\n[^2]: The `plot_model()` function is part of the `sjPlot` package, and is a very useful tool for visualizing regression models. When use use `type = \"pred\"` it visualizes the `pred`iction. Here we also say `show.data = T` to show the actual data points. The `jitter = T` argument randomly moves the data points around a tiny bit, so that if two observations have exactly the same values, they will not overlap. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_model(m, type = \"pred\", show.data = T, jitter=T)\n```\n\n::: {.cell-output-display}\n![](linear-regression_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n\nThe **(intercept)** tells us what the average value of the dependent variable (`trust_t1`) is when the independent variable (`age`) is zero.\nThe `estimate` for the `age` predictor tells us how much the dependent variable (`trust_t1`) changes for every unit increase in the independent variable (`age`).\n\n\n\n\nThe `estimate` for the `age` predictor tells us how much the dependent variable (`trust_t1`) changes for every unit increase in the independent variable (`age`).\nThe coefficient that is reported under `estimate` is `0.04`, which means that for every year older a person is, their trust in journalists increases by 0.04 points.\n\n\n\n\nTogether, the intercept and slope create a regression line that best fits the data.\nYou can think of this line as the prediction.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_model(m, type = \"pred\", show.data = T, jitter=T) \n```\n\n::: {.cell-output-display}\n![](linear-regression_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\nFor every value of `age`, it tells us what the average value of `trust_t1` is.\nSo around the age of 20, the average trust is around 3, whereas for 50 year olds its around 4.2.\n\n\nBy *best fits* we mean that the line minimizes the distance between the predicted values (the line) and the actual values.\n\n\nTo get a better feel for the intercept and slope, we can plot the regression line on a scatterplot of the data.\n\n",
    "supporting": [
      "linear-regression_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}