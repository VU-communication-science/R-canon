{
  "hash": "424461db9c42123de471acc0de4d2f94",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Mediation Analyses'\nsubtitle: 'Conducting simple mediation analyses in R'\n---\n\n\n\n\n# Introduction\n\nIn this tutorial, we will give a preliminary introduction on how to conduct simple mediation analyses in R. \nWe will focus on running multiple regression analyses manually, to explain the concept of mediation and how to test for its significance.\nIn practice, it is often recommended to use specialized packages for mediation analyses, such as `lavaan` or `mediation`, but to develop a good intuition for the concept, you should first understand the basics.\n\n## What is mediation?\n\nWe are often interested in explaining a relationship or causal effect between two variables (e.g., `X` and `Y`). Many theories suggest that `X` does not necessarily *directly* influence `Y`, but that this effect is *mediated* by a third variable, which we can call `M` (for **M**ediation). We can visualize this interplay between the three variables like so:\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](mediation_files/figure-html/unnamed-chunk-1-1.png){width=100%}\n:::\n:::\n\n\n\n\nIn the left figure we see the **total effect** of `X` on `Y`. \nHere we only have one **path** from `X` to `Y`.\n\nIn the right figure, we see a mediation model, where the effect of `X` on `Y` is mediated by `M`. \nThis gives us two different **paths** for how X can influence Y:\n\n* **direct path**. The arrow `X -> Y` represents the **direct** effect of `X` on `Y`.\n* **indirect path**. The arrows `X -> M` and `M -> Y` together represent the **indirect** effect of `X` on `Y` through `M`.\nWe can calculate the indirect effect by multiplying both arrows (**a * b**)\n\nThe mediated model can help us distinguish between different scenarios:\n\n* **Full mediation**: Only the indirect effect of `X` on `Y` through `M` is significant.\n* **No mediation**: Only the direct effect of `X` on `Y` is significant.\n* **Partial mediation**: Both the direct and indirect effects of `X` on `Y` are significant.\n* **No effect**: Neither the direct nor the indirect effect of `X` on `Y` is significant.\n  \n**Note of caution:** Theoretically, mediation models almost always suggest some sort of \"causal chain\". Yet, the analysis itself cannot prove causality. The same caution applies as discussed in the [causality](../concepts/causality.qmd) section.\n\n## Packages and simulating some data\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sjPlot)\n```\n:::\n\n\n\n\nFor this tutorial we are going to simulate some data that align with the Figure presented above. \nYou don't need to understand this process, and can just run the code to create the data.\nBut if you are interested, here is what we are doing:\n\n* Set a seed to make our simulation reproducible. This ensures that even though we are creating random data, the outcome is the same every time we run the code.\n* Creating a variable `x` that is normally distributed with a mean of 3 and a standard deviation of 1.\n* Creating a variable `m` so that it is to some extent influenced by `x` (with a coefficient of `2`), but also has some random noise.\n* Creating a variable `y` that is influenced by `m` (with a coefficient of `2`), but also by `x` (with a coefficient of `0.5`), and some random noise. \n* This gives us a data set in which `x` influences `y` both directly and indirectly through `m`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\nn <- 500\nx <- rnorm(n, 3, 1)\nm <- 0.5 + 2*x + rnorm(n, 0, 1)\ny <- 0.5 + 2*m + 0.5*x + rnorm(n, 0, 1)\n\nd <- tibble(x,m,y)\n```\n:::\n\n\n\n\n\n# Simple regression analyses\n\nLet's first look at the model without the mediator `M`. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm_total <- lm(y ~ x, d)\ntab_model(m_total)\n```\n\n::: {.cell-output-display  html-table-processing=none}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<tr>\n<th style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; \">&nbsp;</th>\n<th colspan=\"3\" style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; \">y</th>\n</tr>\n<tr>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; \">Predictors</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">Estimates</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">CI</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">p</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(Intercept)</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.35</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.70&nbsp;&ndash;&nbsp;2.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">x</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">4.52</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">4.32&nbsp;&ndash;&nbsp;4.73</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;\">Observations</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;\" colspan=\"3\">500</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;\">R<sup>2</sup> / R<sup>2</sup> adjusted</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;\" colspan=\"3\">0.788 / 0.787</td>\n</tr>\n\n</table>\n\n`````\n:::\n:::\n\n\n\n\nThis gives us the total effect of `X` on `Y` ($b = 4.52$, $p < 0.001$). \nSo this is the effect of `X` on `Y` without considering the mediator `M`.\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](mediation_files/figure-html/unnamed-chunk-5-1.png){width=100%}\n:::\n:::\n\n\n\n\nThis is the \n\nThe simplest way to conduct mediation analyses is to run a simple regression for each endogeneous variable in our model. For this simple mediation model, we thus have to create one that estimates the path *a* and one that estimates *b* and *c'* simultaneously. \n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Total effect of x on y\nm_total <- lm(y ~ x, d)\n\n# Effect a, x on m\nm_a <- lm(m ~ x, d)\n\n# Effects b and c', x and m on y\nm_bc <- lm(y ~ m + x, d)\n\ntab_model(m_total, m_a, m_bc)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<tr>\n<th style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; \">&nbsp;</th>\n<th colspan=\"3\" style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; \">y</th>\n<th colspan=\"3\" style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; \">m</th>\n<th colspan=\"3\" style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; \">y</th>\n</tr>\n<tr>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; \">Predictors</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">Estimates</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">CI</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">p</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">Estimates</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">CI</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col7\">p</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col8\">Estimates</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col9\">CI</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  0\">p</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(Intercept)</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.35</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.70&nbsp;&ndash;&nbsp;2.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.50</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.21&nbsp;&ndash;&nbsp;0.80</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8\">0.34</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9\">0.06&nbsp;&ndash;&nbsp;0.62</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0\"><strong>0.016</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">x</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">4.52</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">4.32&nbsp;&ndash;&nbsp;4.73</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.99</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.90&nbsp;&ndash;&nbsp;2.08</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8\">0.54</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9\">0.35&nbsp;&ndash;&nbsp;0.72</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">m</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8\">2.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9\">1.92&nbsp;&ndash;&nbsp;2.08</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;\">Observations</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;\" colspan=\"3\">500</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;\" colspan=\"3\">500</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;\" colspan=\"3\">500</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;\">R<sup>2</sup> / R<sup>2</sup> adjusted</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;\" colspan=\"3\">0.788 / 0.787</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;\" colspan=\"3\">0.778 / 0.778</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;\" colspan=\"3\">0.962 / 0.962</td>\n</tr>\n\n</table>\n\n`````\n:::\n:::\n\n\n\n\nWe can see that all paths are significant, suggesting that there is both a direct and indirect effect of `X` on `Y`. The indirect effect can be computed by multiply the estimate of path *a* with the estimate of path *b*.\n\nIn the second model, we can see that the effect of `X` on `M` is significant, suggesting that there is a direct effect of `X` on `M` ($b = 1.99$, $p < 0.001$).\nIn the third model, we can see that the effect of `M` on `Y` is significant, suggesting that there is a direct effect of `M` on `Y` ($b = 2.00$, $p < 0.001$).\n\nTo calculate \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\na <- summary(m_a)$coef[2,1] \nb <- summary(m_bc)$coef[2,1] \n\n(indirect <- a*b)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3.984083\n```\n\n\n:::\n:::\n\n\n\n\n# Where to go next?\n\nThis tutorial only exemplified simple mediation models. The framework can be extended to more complex models such as parallel mediation models, serial mediation models, or even moderated mediation models. For further information on such models, consider checking out the following books and resources:\n\n- Hayes, A. (2022). Introduction to Mediation, Moderation, and Conditional Process Analysis. A Regression-Based Approach. Guilford Press. \n\n",
    "supporting": [
      "mediation_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}