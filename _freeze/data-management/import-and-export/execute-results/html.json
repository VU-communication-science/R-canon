{
  "hash": "bcc0fe3c4748d597c20454a59fd200fc",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Import and export data\norder: 1\nsubtitle: How to get data into R, and how to get it out\n---\n\n\n\n\n\n\n::: {.callout-note title=\"Short code summary\" collapse=\"true\"}\n\nTo read a CSV file, you can use the `read_csv` function from the `readr` package, which is included in the `tidyverse`.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nd <- read_csv(\"https://raw.githubusercontent.com/fivethirtyeight/data/master/poll-quiz-guns/guns-polls.csv\")\n```\n:::\n\n\n\n\n\nTo see the data, you can just type `d` in the console, or use the `View` function to open a spreadsheet view.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd\nView(d)\n```\n:::\n\n\n\n\n\nTo write a tibble to a CSV file, you can use the `write_csv` function.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(d, \"my_data.csv\")\n```\n:::\n\n\n\n\n\n:::\n\n\n# Reading and writing data {#importing-data}\n\nR can read files from many types of file formats.\nHere we will focus on the **csv** format, which is one of the most common formats for storing and sharing rectangular data (i.e., data in rows and columns).\nOnce you know how to read a CSV file, you can easily read other file formats as well (e.g., **Excel**, **SPSS**).\n\n## CSV files\n\n::: {.callout-note title=\"What is a CSV file?\" collapse=\"true\"}\n`CSV` stands for Comma Separated Values.\nIt is a simple text file, that you can open in any text editor.\nIn order to store a data frame (i.e. data in rows and colums), it simply read every line as a row, and separates the columns by a comma (or sometimes another symbol, like a semicolon).\n\nFor example, the following CSV file contains a data frame with three columns: `resp_id`, `gender`, and `height`. \nThe first row contains the column names, and the following rows contain the data.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nresp_id,gender,height\n1,M,176\n2,M,165\n3,F,172\n4,F,160\n```\n:::\n\n\n\n\n\nThe benefit of this simplicity is that any respectable spreadsheet or statistical software (e.g., Excel, Google sheets, SPSS, Stata) can read it. \nThis makes CSV files a great way to share and store data.\n\nAnd just in case you're worried, yes, CSV can also handle textual data.\nIt uses some tricks to make sure that commas inside the text are not interpreted as column separators.\n:::\n\nThe Tidyverse contains a function `read_csv` that allows you to read a csv file directly into a `tibble`.\nYou can read a file from your own computer, but also directly from the internet.\nWe'll walk you through this in three steps:\n\n* Import data from the internet\n* Write data to a CSV file on your computer\n* Read data from this CSV file back into R\n\n### Importing data from a URL\n\nFor this example we download data about gun polls from the data analytics site [fivethirtyeight](https://fivethirtyeight.com/).\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"https://raw.githubusercontent.com/fivethirtyeight/data/master/poll-quiz-guns/guns-polls.csv\"\ngunpolls <- read_csv(url)\n```\n:::\n\n\n\n\n\nMake sure to always check whether the data was imported correctly:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngunpolls\n```\n:::\n\n\n\n\n\nYou can also view the data in a larger spreadsheet-like view by using the `View` function:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nView(gunpolls)\n```\n:::\n\n\n\n\n\n\n### Writing data to a CSV file on your computer\n\nYou can use the `write_csv` function to write a tibble to a CSV file on your computer.\nYou need to specify the [file path](../getting-started/files-and-projects.qmd#filesystem) where you want to save it.\nIf you just provide a file name, it will be saved in your current working directory.\n\n::: {.callout-note title=\"Finding and changing your working directory\" collapse=\"true\"}\n\nYour working directory is basically the location (i.e. directory) on your computer where R is currently looking for files.\nHere we provide a short refresher for how to find and change your working directory.\nFor a more detailed explanation, see the [file system introduction](../getting-started/files-and-projects.qmd#filesystem).\n\nTo find your working directory, you can use the `getwd()` function:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngetwd()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"/home/kasper/projects/R-canon/data-management\"\n```\n\n\n:::\n:::\n\n\n\n\n\nThe **path** you see here is a directory (i.e. a folder) on your computer. \nIf you write a file without specifying a specific location, it will be saved in this directory.\nA good practise is therefore to **create a directory** where you do all your R stuff, and set this as your working directory.\n\nThere are two ways to set your working directory:\n\n* **Manually**: You can set the working directory with the `setwd()` function.  \n* **Using RStudio**: In RStudio, you can set the working directory by clicking on `Session` in the menu bar, then `Set Working Directory`, and then `Choose Directory`. This will open a file explorer window where you can select the directory you want to set as the working directory.\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(gunpolls, \"gunpoll_data.csv\")\n```\n:::\n\n\n\n\n\nThis will write the `gunpolls` tibble to a file called `gunpoll_data.csv` in your current working directory.\nTry finding it in your file system!\n\nNow let's read this file back into R.\nSince the file is in your working directory, you can just specify the file name:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngunpolls2 <- read_csv(\"gunpoll_data.csv\")\n```\n:::\n\n\n\n\n\nYou can check and verify that the data (gunpolls2) is indeed identical to the original data (gunpolls).\n\n::: {.callout-warning title=\"CSV pitfalls to avoid\" collapse=\"true\"}\nThere are two important pitfalls to avoid when working with CSV files:\n\n### Pitfall 1: Corrupting the file by opening it in Excel\n\nWhen you download a CSV file from the internet, some computers might immediately ask you whether you want to open it in your default spreadsheet program (e.g., Excel, Numbers). \nDo not do this, but instead download the file directly to your computer. If you open the file and accidentally save it, it can overwrite the CSV file with a different format. \nExcel in particular has a habit of breaking CSV files this way. \n\n### Pitfall 2: Different flavours of CSV files\n\nThere are different flavours of CSV files (for historic reasons). \nEven though we call them \"comma separated values\", the separator is sometimes a semicolon or a tab. \nAnd depending on language, the decimal separator can be a comma or a dot. In particular, there are two most common versions of the CSV file. \nThis is why tidyverse has two `read_csv` functions: `read_csv` and `read_csv2`. In general, you can just try `read_csv` first, and if it doesn't work, try `read_csv2`.\n:::\n\n## Reading other file formats, like Excel and SPSS\n\nNow that you know how to read and write CSV files, reading other file formats is a piece of cake.\nIt works almost the same way, but you just need to download a package that can read the file format.\n\nFor instance, to read an Excel file, you can use the `readxl` package, which provides the `read_excel` function. \nTo read an SPSS file, you can use the `haven` package, which provides the `read_sav` function.\nYou might have to take care of some additional details, such as the sheet name in the Excel file, or the variable labels in the SPSS file.\nBut once you've got the hang of managing your data with the tidyverse, you'll be able to handle any data frames formats that come your way.\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}