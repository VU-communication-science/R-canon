{
  "hash": "cdf507ed63f7a54b781f36eedd2c2ea4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Import and view\norder: 1\nsubtitle: How to get your data into R, and how to view it\n---\n\n\n\n\n\n# Data in a tibble format {#tibble}\n\nIn this tutorial we will use the `tidyverse` package to import a **data frame** into R as a `tibble`.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n\n\nBy **data frame** we mean data consisting of rows and columns (e.g., a spreadsheet in *Excel* or *Numbers*).\nIn the most typical use case, rows represent cases in your data (e.g., respondents, participants) and columns represent variables (e.g., age, gender).\nIn R this type of data is called a `data.frame`.\nThe tidyverse has its own special version of a data.frame called a `tibble` (a \"tidy table\").\nThis is the core data structure that we'll be using in this book, and it will form the basis of all your data management, analysis, and visualization.\n\nLet's start simpe.\nThe following code creates a tibble containing respondents, their gender, and their height.\nWe'll call our tibble **d** (short for data).\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd <- tibble(resp_id = c(  1,   2,   3,   4), \n            gender  = c(\"M\", \"M\", \"F\", \"F\"), \n            height  = c(176, 165, 172, 160))\n```\n:::\n\n\n\n\n\nThe name `d` now refers to the entire tibble. \nCompared to spreadsheet software like Excel, we do not automatically see the data. \nThis is actually a benefit, because it means working with large data sets won't slow down your computer.\nInstead, we have several ways to view only the parts of the data that we're interested in.\n\n## Printing the tibble\n\nThe simplest way to view the data is to just print the tibble by typing `d` and running the code:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 3\n  resp_id gender height\n    <dbl> <chr>   <dbl>\n1       1 M         176\n2       2 M         165\n3       3 F         172\n4       4 F         160\n```\n\n\n:::\n:::\n\n\n\n\n\nThis will print a textual representation of the tibble in the console.\nIf the tibble is too large to fit on the screen, R will only print the first few rows and columns, so you don't have to worry about blowing up your computer.\nNote that the tibble also reports the number of rows and columns `(4 x 3)`, and below the names of the columns it shows the data type.\n`<dbl>` stands for double, which is a numeric value, and `<chr>` stands for character, which is a textual value.\n\n## Functions for showing parts of the tibble\n\nThere are several functions that allow you to show specific parts of the tibble.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(d)      # Show the first few rows\ntail(d)      # Show the last few rows\ncolnames(d)  # Show the column names\nrownames(d)  # Show the row names (if they exist)\nncol(d)      # Show the number of columns\nnrow(d)      # Show the number of rows\n```\n:::\n\n\n\n\n\n\n## Viewing the entire tibble\n\nIf you want, you can ask R to show the entire tibble.\nYou can do this in two ways:\n\n* In the top-right window in RStudio, open the Environment tab. Here you see all the objects you've created, including the tibble `d`. Click on `d` to view the entire tibble.\n* You can also do this using code, by running `View(d)`.\n\nThis opens up a convenient window with a spreadsheet, where you can scroll through the data.\nNote that in the top-bar there is also a *Filter* button, and a *Search* bar, which can be very useful for exploring your data.\n\n\n\n# Importing data {#importing-data}\n\nThe first step for any data analysis is to get your data into R.\nAccordingly, you'll need to learn how to import data from the most common file formats.\nThe most important one to know about is the **csv** file, but you can also import data from **Excel**, **SPSS**, **Stata**, and many other formats.\n\n## CSV files\n\nOne of the most common formats for storing and sharing rectangular data is the `csv` format.\n`CSV` stands for Comma Separated Values, meaning that the columns in the data are separated by commas.\nThe benefit of CSV files is that they are so simple that any respectable statistical software can read them.\nFormats such as Excel or SPSS files are specifically designed for their respective software (you can't open an SPSS file in Excel).\n\nTidyverse contains a function `read_csv` that allows you to read a csv file directly into a data frame.\nYou just specify the location of the file, which can either be a filepath your own device, or a URL to download the data directly from the Internet!\nHere we download a data set about gun polls from the [data analytics site 538](https://fivethirtyeight.com/).\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"https://raw.githubusercontent.com/fivethirtyeight/data/master/poll-quiz-guns/guns-polls.csv\"\ngunpolls <- read_csv(url)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 57 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (6): Question, Start, End, Pollster, Population, URL\ndbl (3): Support, Republican Support, Democratic Support\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n\n\nWhen you import the CSV, R will print some information about the number of rows and columns, and the names of the columns.\nAlways check this information to make sure that the data was imported correctly.\n\n\n\n::: {.callout-note title=\"How do I know the location of the file on my computer?\" collapse=\"true\"}\n\nIf you've never worked with file paths before, you might be wondering how to know the location of the file on your computer.\nThere are several easy ways to find it.\nJust pick one or two that you find most convenient.\n\n* **Using RStudio**. In the bottom-right window, you can go to the `Files` tab. Here you can browse to the file on your computer. Then when you click on the file, RStudio will understand that it's a CSV file, and give you the `Import Dataset` option. This will open a visual interface for importing the data. Note that it also gives you the code that you can use to import the data.\n* **From the file explorer**: Open the file explorer on your computer, and navigate to the file. You can then right-click on the file and select *Properties* (or some similar term). Here you'll find the *Location* of the file. **Even better**: you can right-click on the file and copy it, and when you then paste it into RStudio, it will give you the file path.\n* **run file.choose**. If you run the code `file.choose()`, R will open a file explorer window. Here you can browse to the file, and when you select it, R will print the file path in the console window.\n* **Using relative paths**: A file path can be both an *absolute path* (e.g., `C:/Users/username/Documents/data.csv`) or a *relative path* (e.g., `data.csv`). The relative path is relative to your [working directory](../getting-started/working-directory.qmd#working-directory). You can always check your working directory by running `getwd()`. If a file is in your current working directory, you can just specify the name of the file (e.g., `data.csv`). If the file is in a subfolder, you can specify this by using a forward slash (e.g., `subfolder/data.csv`).\n\n\nIf you click \"Import Dataset\", then you'll get a window for importing the data.\n\n::: {.callout-warning title=\"?\" collapse=\"true\"}\nThere are two important pitfalls to avoid when working with CSV files:\n\n### Pitfall 1: Corrupting the file by opening it in Excel\n\nWhen you download a CSV file from the internet, some computers might immediately ask you whether you want to open it in your default spreadsheet program (e.g., Excel, Numbers). \nDo not do this, but instead download the file directly to your computer. If you open the file and accidentally save it, it can overwrite the CSV file with a different format. \nExcel in particular has a habit of breaking CSV files this way. \n\n### Pitfall 2: Different flavours of CSV files\n\nThere are different flavours of CSV files (for historic reasons). \nEven though we call them \"comma separated values\", the separator is sometimes a semicolon or a tab. \nAnd depending on language, the decimal separator can be a comma or a dot. In particular, there are two most common versions of the CSV file. \nThis is why tidyverse has two `read_csv` functions: `read_csv` and `read_csv2`. In general, you can just try `read_csv` first, and if it doesn't work, try `read_csv2`.\n:::\n\n# Convert data.frame to tibble {#as-tibble}\n\nSometimes you already have a data.frame in R, and you just want to convert it to a tibble.\nFor this you can use the `as_tibble` function.\n\nFor example, R comes with several built-in data.frames, that are usefull if you want to quickly test something. \nOne of these is the `iris` data set, which contains measurements of flowers.\nIf you want to convert this to a tibble, you can use the `as_tibble` function:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nas_tibble(iris)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 150 × 5\n   Sepal.Length Sepal.Width Petal.Length Petal.Width Species\n          <dbl>       <dbl>        <dbl>       <dbl> <fct>  \n 1          5.1         3.5          1.4         0.2 setosa \n 2          4.9         3            1.4         0.2 setosa \n 3          4.7         3.2          1.3         0.2 setosa \n 4          4.6         3.1          1.5         0.2 setosa \n 5          5           3.6          1.4         0.2 setosa \n 6          5.4         3.9          1.7         0.4 setosa \n 7          4.6         3.4          1.4         0.3 setosa \n 8          5           3.4          1.5         0.2 setosa \n 9          4.4         2.9          1.4         0.2 setosa \n10          4.9         3.1          1.5         0.1 setosa \n# ℹ 140 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\n## The iris dataset {#iris}\n\nWe'll be using this `iris` dataset in some of the next tutorials, so let's see what data it contains. \nFrom the previous output we see that there are five columns:\n\n- `Sepal.Length`: the length of the sepal (the green leaf-like part of the flower)\n- `Sepal.Width`: the width of the sepal\n- `Petal.Length`: the length of the petal (the colored part of the flower)\n- `Petal.Width`: the width of the petal\n- `Species`: the species of the flower\n\nThe data has 150 rows, so it contains measurements of 150 flowers.\nThe sepal and petal columns are numeric, and measured in centimeters.\nThe species column is a factor with three levels: `setosa`, `versicolor`, and `virginica`.\n\n",
    "supporting": [
      "import-and-view_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}